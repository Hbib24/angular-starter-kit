@if(isVisible) {
<div [formGroup]="form()">
  <nz-form-item>
    @if (!adapter.isCheckField){
    <ng-container [ngTemplateOutlet]="fieldLabel" />
    }
    <nz-form-control
      class="!col-span-2"
      [nzValidateStatus]="isDirty && !isValid ? 'error' : ''"
      [nzHasFeedback]="field().showFeedback"
      [nzErrorTip]="field().validationHint"
      [nzExtra]="isDirty && !isValid ? undefined : field().hint"
    >
      @if(!loading) { @if (adapter.isTextField) {
      <input
        nz-input
        [formControlName]="field().name"
        [id]="field().name"
        type="text"
        [placeholder]="field().placeholder || field().label"
      />
      } @else if (adapter.isNumericField) {
      <nz-input-number
        class="!w-full"
        [formControlName]="field().name"
        [nzControls]="false"
        [nzId]="field().name"
        [nzPlaceHolder]="field().placeholder || null"
        [nzMin]="adapter.fieldAsNumericField.min"
        [nzMax]="adapter.fieldAsNumericField.max"
      />
      } @else if (adapter.isDateField) {
      <nz-date-picker
        class="!w-full"
        [nzShowTime]="adapter.fieldAsDateField.type === 'datetime'"
        [nzMode]="
          adapter.fieldAsDateField.type === 'datetime'
            ? 'date'
            : adapter.fieldAsDateField.type
        "
        [formControlName]="field().name"
        [nzAllowClear]="true"
        [nzId]="field().name"
        [nzFormat]="dateFormat"
      ></nz-date-picker>
      } @else if(adapter.isTimeField) {
      <nz-time-picker
        [formControlName]="field().name"
        [nzId]="field().name"
        class="!w-full"
        [nzAllowEmpty]="true"
        [nzHideDisabledOptions]="true"
      ></nz-time-picker>
      }@else if(adapter.isAreaField) {
      <textarea
        [id]="field().name"
        nz-input
        [formControlName]="field().name"
        [rows]="adapter.fieldAsAreaField.rows"
      ></textarea>
      } @else if (adapter.isSelectField || adapter.isMultiSelectField) {
      <nz-select
        [formControlName]="field().name"
        [nzId]="field().name"
        [nzShowSearch]="true"
        [nzAllowClear]="true"
        [nzMode]="adapter.isMultiSelectField ? 'multiple' : 'default'"
        [nzPlaceHolder]="field().placeholder || null"
      >
        @for (item of selectOptions; track $index) { @if (typeof item.label ===
        'string') {
        <nz-option
          [nzLabel]="item.label"
          [nzValue]="item.value"
          [nzDisabled]="item.disabled"
        >
        </nz-option>
        } }
      </nz-select>
      }@else if (adapter.isCheckField) { @if(adapter.fieldAsCheckField.type ==
      'default') {
      <label nz-checkbox [formControlName]="field().name" [nzId]="field().name">
        <ng-container [ngTemplateOutlet]="fieldLabel" />
      </label>
      } @else {
      <div class="flex gap-2">
        <nz-switch
          [formControlName]="field().name"
          [nzId]="field().name"
        ></nz-switch>
        <ng-container [ngTemplateOutlet]="fieldLabel" />
      </div>
      } } @else if(adapter.isTemplateField) {
      <ng-container
        [ngTemplateOutlet]="adapter.fieldAsTemplateField.template"
      />
      } } @else {
      <div class="h-[32px] w-full rounded-lg animate-pulse bg-zinc-200"></div>
      }
    </nz-form-control>
  </nz-form-item>
</div>
}

<ng-template #fieldLabel>
  <nz-form-label
    class="font-semibold mt-0.5"
    [nzRequired]="isRequired"
    [nzFor]="field().name"
  >
    @if (adapter.templateLabel) {
    <ng-container [ngTemplateOutlet]="adapter.templateLabel" />
    }@else {
    {{ field().label }}
    }
  </nz-form-label>
</ng-template>
